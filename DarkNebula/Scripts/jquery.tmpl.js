(function (a, b) { function y() { var b = this.nodes; a.tmpl(null, null, null, this).insertBefore(b[0]); a(b).remove() } function x(b, c) { var d = this._wrap; return a.map(a(a.isArray(d) ? d.join("") : d).filter(b || "*"), function (a) { return c ? a.innerText || a.textContent : a.outerHTML || s(a) }) } function w(b, c) { var d = b.options || {}; d.wrapped = c; return a.tmpl(a.template(b.tmpl), b.data, d, b.item) } function v(b, c, d) { return a.tmpl(a.template(b), c, d, this) } function u(a, b, c, d) { if (!a) { return l.pop() } l.push({ _: a, tmpl: b, item: this, data: c, options: d }) } function t(b) { function p(b) { function p(a) { a = a + c; n = i[a] = i[a] || m(n, f[n.parent.key + c] || n.parent) } var e, h = b, l, n, o; if (o = b.getAttribute(d)) { while (h.parentNode && (h = h.parentNode).nodeType === 1 && !(e = h.getAttribute(d))) { } if (e !== o) { h = h.parentNode ? h.nodeType === 11 ? 0 : h.getAttribute(d) || 0 : 0; if (!(n = f[o])) { n = g[o]; n = m(n, f[h] || g[h]); n.key = ++j; f[j] = n } if (k) { p(o) } } b.removeAttribute(d) } else if (k && (n = a.data(b, "tmplItem"))) { p(n.key); f[n.key] = n; h = a.data(b.parentNode, "tmplItem"); h = h ? h.key : 0 } if (n) { l = n; while (l && l.key != h) { l.nodes.push(b); l = l.parent } delete n._ctnt; delete n._wrap; a.data(b, "tmplItem", n) } } var c = "_" + k, e, h, i = {}, l, n, o; for (l = 0, n = b.length; l < n; l++) { if ((e = b[l]).nodeType !== 1) { continue } h = e.getElementsByTagName("*"); for (o = h.length - 1; o >= 0; o--) { p(h[o]) } p(e) } } function s(a) { var b = document.createElement("div"); b.appendChild(a.cloneNode(true)); return b.innerHTML } function r(a) { return a ? a.replace(/\\'/g, "'").replace(/\\\\/g, "\\") : null } function q(b, c) { b._wrap = n(b, true, a.isArray(c) ? c : [e.test(c) ? c : a(c).html()]).join("") } function p(b) { return new Function("jQuery", "$item", "var $=jQuery,call,__=[],$data=$item.data;" + "with($data){__.push('" + a.trim(b).replace(/([\\'])/g, "\\$1").replace(/[\r\t\n]/g, " ").replace(/\$\{([^\}]*)\}/g, "{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g, function (b, c, d, e, f, g, h) { var i = a.tmpl.tag[d], j, k, l; if (!i) { throw "Unknown template tag: " + d } j = i._default || []; if (g && !/\w$/.test(f)) { f += g; g = "" } if (f) { f = r(f); h = h ? "," + r(h) + ")" : g ? ")" : ""; k = g ? f.indexOf(".") > -1 ? f + r(g) : "(" + f + ").call($item" + h : f; l = g ? k : "(typeof(" + f + ")==='function'?(" + f + ").call($item):(" + f + "))" } else { l = k = j.$1 || "null" } e = r(e); return "');" + i[c ? "close" : "open"].split("$notnull_1").join(f ? "typeof(" + f + ")!=='undefined' && (" + f + ")!=null" : "true").split("$1a").join(l).split("$1").join(k).split("$2").join(e || j.$2 || "") + "__.push('" }) + "');}return __;") } function o(b) { var c = document.createElement("div"); c.innerHTML = b; return a.makeArray(c.childNodes) } function n(b, c, e) { var f, g = e ? a.map(e, function (a) { return typeof a === "string" ? b.key ? a.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g, "$1 " + d + '="' + b.key + '" $2') : a : n(a, b, a._ctnt) }) : b; if (c) { return g } g = g.join(""); g.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/, function (b, c, d, e) { f = a(d).get(); t(f); if (c) { f = o(c).concat(f) } if (e) { f = f.concat(o(e)) } }); return f ? f : o(g) } function m(b, c, d, e) { var h = { data: e || e === 0 || e === false ? e : c ? c.data : {}, _wrap: c ? c._wrap : null, tmpl: null, parent: c || null, nodes: [], calls: u, nest: v, wrap: w, html: x, update: y }; if (b) { a.extend(h, b, { nodes: [], parent: c }) } if (d) { h.tmpl = d; h._ctnt = h._ctnt || h.tmpl(a, h); h.key = ++j; (l.length ? g : f)[j] = h } return h } var c = a.fn.domManip, d = "_tmplitem", e = /^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /, f = {}, g = {}, h, i = { key: 0, data: {} }, j = 0, k = 0, l = []; a.each({ appendTo: "append", prependTo: "prepend", insertBefore: "before", insertAfter: "after", replaceAll: "replaceWith" }, function (b, c) { a.fn[b] = function (d) { var e = [], g = a(d), i, j, l, m, n = this.length === 1 && this[0].parentNode; h = f || {}; if (n && n.nodeType === 11 && n.childNodes.length === 1 && g.length === 1) { g[c](this[0]); e = this } else { for (j = 0, l = g.length; j < l; j++) { k = j; i = (j > 0 ? this.clone(true) : this).get(); a(g[j])[c](i); e = e.concat(i) } k = 0; e = this.pushStack(e, b, g.selector) } m = h; h = null; a.tmpl.complete(m); return e } }); a.fn.extend({ tmpl: function (b, c, d) { return a.tmpl(this[0], b, c, d) }, tmplItem: function () { return a.tmplItem(this[0]) }, template: function (b) { return a.template(b, this[0]) }, domManip: function (b, d, e, g) { if (b[0] && a.isArray(b[0])) { var i = a.makeArray(arguments), j = b[0], l = j.length, m = 0, n; while (m < l && !(n = a.data(j[m++], "tmplItem"))) { } if (n && k) { i[2] = function (b) { a.tmpl.afterManip(this, b, e) } } c.apply(this, i) } else { c.apply(this, arguments) } k = 0; if (!h) { a.tmpl.complete(f) } return this } }); a.extend({ tmpl: function (b, c, d, e) { var h, j = !e; if (j) { e = i; b = a.template[b] || a.template(null, b); g = {} } else if (!b) { b = e.tmpl; f[e.key] = e; e.nodes = []; if (e.wrapped) { q(e, e.wrapped) } return a(n(e, null, e.tmpl(a, e))) } if (!b) { return [] } if (typeof c === "function") { c = c.call(e || {}) } if (d && d.wrapped) { q(d, d.wrapped) } h = a.isArray(c) ? a.map(c, function (a) { return a ? m(d, e, b, a) : null }) : [m(d, e, b, c)]; return j ? a(n(e, null, h)) : h }, tmplItem: function (b) { var c; if (b instanceof a) { b = b[0] } while (b && b.nodeType === 1 && !(c = a.data(b, "tmplItem")) && (b = b.parentNode)) { } return c || i }, template: function (b, c) { if (c) { if (typeof c === "string") { c = p(c) } else if (c instanceof a) { c = c[0] || {} } if (c.nodeType) { c = a.data(c, "tmpl") || a.data(c, "tmpl", p(c.innerHTML)) } return typeof b === "string" ? a.template[b] = c : c } return b ? typeof b !== "string" ? a.template(null, b) : a.template[b] || a.template(null, e.test(b) ? b : a(b)) : null }, encode: function (a) { return ("" + a).split("<").join("<").split(">").join(">").split('"').join("&#34;").split("'").join("&#39;") } }); a.extend(a.tmpl, { tag: { tmpl: { _default: { $2: "null" }, open: "if($notnull_1){__=__.concat($item.nest($1,$2));}" }, wrap: { _default: { $2: "null" }, open: "$item.calls(__,$1,$2);__=[];", close: "call=$item.calls();__=call._.concat($item.wrap(call,__));" }, each: { _default: { $2: "$index, $value" }, open: "if($notnull_1){$.each($1a,function($2){with(this){", close: "}});}" }, "if": { open: "if(($notnull_1) && $1a){", close: "}" }, "else": { _default: { $1: "true" }, open: "}else if(($notnull_1) && $1a){" }, html: { open: "if($notnull_1){__.push($1a);}" }, "=": { _default: { $1: "$data" }, open: "if($notnull_1){__.push($.encode($1a));}" }, "!": { open: ""} }, complete: function (a) { f = {} }, afterManip: function z(b, c, d) { var e = c.nodeType === 11 ? a.makeArray(c.childNodes) : c.nodeType === 1 ? [c] : []; d.call(b, c); t(e); k++ } }) })(jQuery)